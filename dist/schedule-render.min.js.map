{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/schedule-render.js"],"names":["f","exports","module","define","amd","window","global","self","this","scheduleRender","r","e","n","t","o","i","c","require","u","a","Error","code","p","call","length","1","frame","budget","callback","Promise","resolve","requestAnimationFrame","render","batch","push","cancelAnimationFrame","browserRenderTime","start","performance","now","shift","fps","value"],"mappings":";CAAA,SAAAA,GAAA,GAAA,iBAAAC,SAAA,oBAAAC,OAAAA,OAAAD,QAAAD,SAAA,GAAA,mBAAAG,QAAAA,OAAAC,IAAAD,OAAA,GAAAH,OAAA,EAAA,oBAAAK,OAAAA,OAAA,oBAAAC,OAAAA,OAAA,oBAAAC,KAAAA,KAAAC,MAAAC,eAAAT,KAAA,CAAA,WAAA,OAAA,SAAAU,EAAAC,EAAAC,EAAAC,GAAA,SAAAC,EAAAC,EAAAf,GAAA,IAAAY,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,IAAAC,EAAA,mBAAAC,SAAAA,QAAA,IAAAjB,GAAAgB,EAAA,OAAAA,EAAAD,GAAA,GAAA,GAAAG,EAAA,OAAAA,EAAAH,GAAA,GAAA,IAAAI,EAAA,IAAAC,MAAA,uBAAAL,EAAA,KAAA,MAAAI,EAAAE,KAAA,mBAAAF,EAAA,IAAAG,EAAAV,EAAAG,GAAA,CAAAd,QAAA,IAAAU,EAAAI,GAAA,GAAAQ,KAAAD,EAAArB,QAAA,SAAAS,GAAA,OAAAI,EAAAH,EAAAI,GAAA,GAAAL,IAAAA,IAAAY,EAAAA,EAAArB,QAAAS,EAAAC,EAAAC,EAAAC,GAAA,OAAAD,EAAAG,GAAAd,QAAA,IAAA,IAAAiB,EAAA,mBAAAD,SAAAA,QAAAF,EAAA,EAAAA,EAAAF,EAAAW,OAAAT,IAAAD,EAAAD,EAAAE,IAAA,OAAAD,EAAA,CAAA,CAAAW,EAAA,CAAA,SAAAR,EAAAf,EAAAD,gBCAA,IAAIyB,EACAC,oEAqBG,SAAwBC,GAC3B,OAAO,IAAIC,QAAQ,SAACC,GACXJ,IACDA,EAAQK,sBAAsBC,IAElCC,EAAMC,KAAK,WAAA,OAAMJ,EAAQF,0BAQ1B,WACCF,GACAS,qBAAqBT,GAEzBO,EAAMT,OAAS,GArCnB,IAAMS,EAAQ,GAIRG,EAAoB,EAE1B,SAASJ,IACLN,EAAQ,KACR,IAAMW,EAAQC,YAAYC,MAC1B,EAAG,CACC,IAAMX,EAAWK,EAAMO,QACnBZ,GACAA,UAECK,EAAMT,QAAYc,YAAYC,MAAQF,EAASV,GACpDM,EAAMT,SACNE,EAAQK,sBAAsBC,IAa/B,SAASS,EAAIC,GAChBf,EAAU,IAAOe,EAASN,EAU9BK,EAAI,iBD1CJ","file":"schedule-render.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","let frame;\r\nlet budget;\r\nconst batch = [];\r\n\r\n// Browser's require around 6ms to render a frame\r\n// https://developers.google.com/web/fundamentals/performance/rail#animation\r\nconst browserRenderTime = 6;\r\n\r\nfunction render() {\r\n    frame = null;\r\n    const start = performance.now();\r\n    do {\r\n        const callback = batch.shift();\r\n        if (callback) {\r\n            callback();\r\n        }\r\n    } while (batch.length && ((performance.now() - start) < budget));\r\n    if (batch.length) {\r\n        frame = requestAnimationFrame(render);\r\n    }\r\n}\r\n\r\nexport function scheduleRender(callback) {\r\n    return new Promise((resolve) => {\r\n        if (!frame) {\r\n            frame = requestAnimationFrame(render);\r\n        }\r\n        batch.push(() => resolve(callback()));\r\n    });\r\n}\r\n\r\nexport function fps(value) {\r\n    budget = (1000 / value) - browserRenderTime;\r\n}\r\n\r\nexport function clear() {\r\n    if (frame) {\r\n        cancelAnimationFrame(frame);\r\n    }\r\n    batch.length = 0;\r\n}\r\n\r\nfps(60);\r\n"]}